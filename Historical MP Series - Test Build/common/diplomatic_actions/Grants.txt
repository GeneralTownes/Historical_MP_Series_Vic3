grant_grant = {
	requires_approval = no
    should_notify_third_parties = yes
	show_effect_in_tooltip = no
	potential = {
		NOT = { is_country_type = decentralized }
		scope:target_country = {
			NOT = { is_country_type = decentralized }
		}
	}
    possible = {
		NOT = { has_global_variable = grant_being_given }
	}
    accept_effect = {
		set_global_variable = grant_being_given
        trigger_event = {
			id = grants.1
			days = 0
			popup = yes
		}
		scope:target_country = {
			set_variable = grant_recipient
		}	
		if = {
			limit = {
				root = {
					owes_obligation_to = scope:target_country			
				}			
			}
			root = { set_owes_obligation_to = { country = scope:target_country setting = no } }
		}		
		else_if = {
			limit = {
				scope:target_country = {
					NOT = { owes_obligation_to = root }					
				}			
			}
			scope:target_country = { set_owes_obligation_to = { country = root setting = yes } }
		}
		else = {
			change_relations = { country = scope:target_country value = 30 }
		}
    }
    ai = {
        will_propose = {
            always = no
        }
        accept_score = {
            value = 0
            if = {
                limit = {
                    scope:actor = {
                        is_ai = no
                    }
                }
                add = {
                    desc = "DIPLOMATIC_ACCEPTANCE_BASE"
                    value = 100
                }
            }
        }
    }
}