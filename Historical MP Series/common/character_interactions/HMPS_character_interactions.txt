marry_ruler_or_heir = {
	icon = "gfx/interface/icons/ideology_icons/ideology_leader/ideology_leader_royalist.dds"
	clicksound = "event:/SFX/UI/Military/command_grant"

	potential = {
		owner = scope:actor
		OR = {
			is_ruler = yes
			is_heir = yes
		}
		scope:actor ?= {
			has_law = law_type:law_monarchy
			religion = {
				has_discrimination_trait = christian
			}
		}
		age >= 18
		NOT = { has_variable = spouse_seeker }
		NOT = { has_variable = is_married }
	}

	possible = {
		any_country = {
			NOT = { THIS = scope:actor }
			has_law = law_type:law_monarchy
			religion = scope:actor.religion
			ruler = {
				age > 36
				custom_tooltip = {
					text = marriage_target_tt
					NOT = { has_variable = marriage_target }
				}
			}
		}
	}
	effect = {
		set_variable = spouse_seeker
		owner = { 
			trigger_event = { id = wedding.2 popup = yes } 
		}
	}
	cooldown = { months = normal_modifier_time }

	ai_chance = {
		value = 25
	}
}

abdicate_monarch = {
	icon = "gfx/interface/icons/ideology_icons/ideology_leader/ideology_leader_republican.dds"
	clicksound = "event:/SFX/UI/Military/command_grant"

	potential = {
		has_dlc_feature = voice_of_the_people_content
		owner = scope:actor
		is_ruler = yes
		owner = {
			has_law = law_type:law_monarchy
		}
		exists = owner.heir
	}

	possible = {
		OR = {
			interest_group = {
				is_marginal = yes
			}
			popularity <= -50
			OR = {
				has_trait = psychological_affliction
				has_trait = cancer
				has_trait = senile
				has_trait = wounded
			}
			age >= 75
		}
		owner.heir = {
			age >= 18
		}
	}

	effect = {
		custom_tooltip = leader_abdicates_the_throne_display_tt
		if = {
			limit = {
				owner = {
					any_interest_group = {
						is_insurrectionary = yes
					}
				}
			}
			owner = {
				trigger_event = { id = resignation.3 popup = yes }
			}
		}
		else = {
			owner = {
				trigger_event = { id = wedding.3 popup = yes}
			}
		}
	}

	cooldown = { months = 360 }
	show_confirmation_box = yes

	ai_chance = {
		value = -50
		if = {
			limit = {	
				interest_group = {
					ig_approval <= angry
				}
			}
			add = 25
		}	
		if = {
			limit = {
				interest_group = {
					is_marginal = yes
				}				
			}
			add = 25
		}
		if = {
			limit = {
				popularity <= -50			
			}
			add = 25
		}
		if = {
			limit = {
				popularity <= -75			
			}
			add = 25
		}
		if = {
			limit = {
				age >= 75			
			}
			add = 50
		}
		if = {
			limit = {
				has_trait = psychological_affliction			
			}
			add = 25
		}
	}
}