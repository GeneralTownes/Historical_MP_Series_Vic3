je_chinese_industry = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	
	group = je_group_historical_content
	
	immediate = {
		set_global_variable = {
			name = chinese_industrial_advancement
			value = 0
		}
	}
	
	complete = {
		custom_tooltip = {
			text = je_china_economic_success_tt
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}
	
	on_complete = {
		remove_modifier = chinese_economic_stagnation
		custom_tooltip = {
			text = je_china_economic_complete_tt
			if = {
				limit = {
					NOT = {
						has_journal_entry = WCR_je_westernization
					}
					is_country_type = unrecognized
				}
				set_variable = {
					name = WCR_decision_taken
					days = 120
				}
				if = {
					limit = {
						has_game_rule = WCR_enable_influences
					}
					trigger_event = {
						id    = WCR_ev.2
						popup = yes
					}
				}
				else = {
					add_journal_entry = {
						type = WCR_je_westernization
					}
					add_modifier = {
						name  = WCR_ig_westernization_1_modifier
						years = -1
					}
				}
			}
		}
	}

	on_monthly_pulse = {
		effect = {
			### Criteria
			if = {
				limit = {
					has_technology_researched = lathe
					has_technology_researched = stock_exchange
					GDP >= 100000000
					NOT = { has_global_variable = lvl_1_chinese_industry }
				}
				change_global_variable = {
					name = chinese_industrial_advancement
					add = 1
				}
				set_global_variable = lvl_1_chinese_industry
			}
			if = {
				limit = {
					has_technology_researched = nitroglycerin
					has_technology_researched = banking
					GDP >= 200000000
					NOT = { has_global_variable = lvl_2_chinese_industry }
				}
				change_global_variable = {
					name = chinese_industrial_advancement
					add = 1
				}
				set_global_variable = lvl_2_chinese_industry
			}
			if = {
				limit = {
					has_technology_researched = railways
					has_technology_researched = postal_savings
					GDP >= 300000000
					NOT = { has_global_variable = lvl_3_chinese_industry }
				}
				change_global_variable = {
					name = chinese_industrial_advancement
					add = 1
				}
				set_global_variable = lvl_3_chinese_industry
			}
			if = {
				limit = {
					has_technology_researched = pumpjacks
					has_technology_researched = mutual_funds
					GDP >= 400000000
					NOT = { has_global_variable = lvl_4_chinese_industry }
				}
				change_global_variable = {
					name = chinese_industrial_advancement
					add = 1
				}
				set_global_variable = lvl_4_chinese_industry
			}
			if = {
				limit = {
					has_technology_researched = electrical_generation
					has_technology_researched = civilizing_mission
					GDP >= 500000000
					NOT = { has_global_variable = lvl_5_chinese_industry }
				}
				change_global_variable = {
					name = chinese_industrial_advancement
					add = 1
				}
				set_global_variable = lvl_5_chinese_industry
			}
			
			### Modifiers
			remove_modifier = chinese_economic_stagnation
			if = {
				limit = {
					global_var:chinese_industrial_advancement = 0
				}
				add_modifier = {
					name = chinese_economic_stagnation
				}
			}
			if = {
				limit = {
					global_var:chinese_industrial_advancement = 1
				}
				add_modifier = {
					name = chinese_economic_stagnation
					multiplier = 0.8
				}
			}
			if = {
				limit = {
					global_var:chinese_industrial_advancement = 2
				}
				add_modifier = {
					name = chinese_economic_stagnation
					multiplier = 0.6
				}
			}
			if = {
				limit = {
					global_var:chinese_industrial_advancement = 3
				}
				add_modifier = {
					name = chinese_economic_stagnation
					multiplier = 0.4
				}
			}
			if = {
				limit = {
					global_var:chinese_industrial_advancement = 4
				}
				add_modifier = {
					name = chinese_economic_stagnation
					multiplier = 0.2
				}
			}
		}
	}

	current_value = {
		value = global_var:chinese_industrial_advancement
	}

	goal_add_value = {
		value = 5
	}

	progressbar = yes

	can_revolution_inherit = yes

	weight = 5000
	should_be_pinned_by_default = yes
}