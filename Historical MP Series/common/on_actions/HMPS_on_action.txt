small_nation_inno_fix = {
	effect = {
		#small nation innovation fix
		if = {
			limit = {
				has_modifier = small_nation_inno_modifier
			}
			remove_modifier = small_nation_inno_modifier
		}
		#50% innovation
		if = {
			limit = { 
				total_population_including_subjects < 2500000
			}
			add_modifier = {
				name = small_nation_inno_modifier
				multiplier = 5
			}
		}
		#40% innovation
		else_if = {
			limit = { 
				total_population_including_subjects < 3000000
			}
			add_modifier = {
				name = small_nation_inno_modifier
				multiplier = 4
			}
		}
		#30% innovation
		else_if = {
			limit = {
				total_population_including_subjects < 3500000
			}
			add_modifier = {
				name = small_nation_inno_modifier
				multiplier = 3
			}
		}
		#20% innovation
		else_if = {
			limit = {
				total_population_including_subjects < 4000000
			}
			add_modifier = {
				name = small_nation_inno_modifier
				multiplier = 2
			}
		}
		#10% innovation
		else_if = {
			limit = {
				total_population_including_subjects < 4500000
			}
			add_modifier = {
				name = small_nation_inno_modifier
			}
		}
		#5% innovation
		else_if = {
			limit = {
				total_population_including_subjects < 5000000
			}
			add_modifier = {
				name = small_nation_inno_modifier
				multiplier = 0.5
			}
		}
	}
}


check_for_gm = {
	effect = {
		if = {
			limit = {
				any_country = {
					has_modifier = game_master
					is_player = no
				}
			}
			random_country = {
				limit = {
					has_modifier = game_master
				}
			remove_modifier = game_master
			remove_global_variable = player_gm
			}
		}
	}
}

ai_modifiers = {
	effect = {
		if = {
			limit = {
				has_modifier = ai_rebellion_buff
				OR = {
					is_player = yes
					is_revolutionary = no
				}
			}
			remove_modifier = ai_rebellion_buff
		}
	}
}

#Happens to on_revolution
HMPS_revolution_boost = {
	effect = {
		if = {
			limit = {
				is_player = yes
				scope_target = {
					is_player = no
				}
			}
			scope:target = {
				add_modifier = {
					name = ai_rebellion_buff
				}
			}
		}
		
	}
}

